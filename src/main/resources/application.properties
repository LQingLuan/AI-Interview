# =====================================================================
# ????????
# =====================================================================

# ????
spring.application.name=smart-interview-system

  # ??Spring Boot????????????
spring.main.banner-mode=off

  # ??????
spring.web.resources.static-locations=classpath:/static/,classpath:/templates/

  # AOP????
spring.aop.proxy-target-class=true

  # Jackson JSON??
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
spring.jackson.time-zone=GMT+8

  # Spring MVC??
spring.mvc.static-path-pattern=/static/**
spring.mvc.pathmatch.matching-strategy=ant_path_matcher

  # ????
spring.cache.type=simple
spring.cache.cache-names=interview-sessions,speech-results
spring.cache.caffeine.spec=maximumSize=500,expireAfterWrite=30m

  # ??????
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=20MB
spring.servlet.multipart.enabled=true
spring.servlet.multipart.location=${java.io.tmpdir}/smart-interview-uploads

  # =====================================================================
  # ?????
  # =====================================================================

  # ????
server.port=8080

  # ???????30???
server.servlet.session.timeout=30m

  # ??????
server.compression.enabled=true
server.compression.mime-types=application/json,application/xml,text/html,text/xml,text/plain,application/javascript
server.compression.min-response-size=1024

  # ??????
server.error.include-message=always
server.error.include-binding-errors=always

  # SSL??????????
server.ssl.enabled=false
server.ssl.key-store=classpath:keystore.p12
server.ssl.key-store-password=changeit
server.ssl.key-store-type=PKCS12
server.ssl.key-alias=tomcat

  # =====================================================================
  # ??API??
  # =====================================================================

  # ??????
iflytek.app-id=36b21c70
iflytek.api-key=499e0f82b7007b342a200d1f6157eee5
iflytek.api-secret=ZWFhYjJiMWViNmFmZGIwYTdlYThiMjAz
iflytek.api-url=wss://iat-api.xfyun.cn/v2/iat

  # ????AI??
iflytek.spark.api-url=wss://spark-api.xf-yun.com/v1.1/chat
iflytek.spark.appid=36b21c70
iflytek.spark.api-secret=ZWFhYjJiMWViNmFmZGIwYTdlYThiMjAz
iflytek.spark.api-key=499e0f82b7007b342a200d1f6157eee5

  # =====================================================================
  # ???????
  # =====================================================================

  # ???????
async.feedback-executor.core-pool-size=5
async.feedback-executor.max-pool-size=20
async.feedback-executor.queue-capacity=100
async.feedback-executor.thread-name-prefix=Async-Feedback-

  # ???????
async.speech-executor.core-pool-size=10
async.speech-executor.max-pool-size=50
async.speech-executor.queue-capacity=200
async.speech-executor.thread-name-prefix=Speech-Processing-

  # AI?????
async.ai-executor.core-pool-size=8
async.ai-executor.max-pool-size=30
async.ai-executor.queue-capacity=150
async.ai-executor.thread-name-prefix=AI-Call-

# JWT??
jwt.secret=smart-interview-secret-key-change-this-in-production
jwt.expiration=86400000 

  # =====================================================================
  # ????
  # =====================================================================

  # ??????
logging.level.root=INFO
logging.level.com.university.smartinterview=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=WARN
logging.level.org.springframework.web.servlet.mvc.method.annotation=TRACE

  # ??????
logging.file.name=logs/smart-interview.log
logging.file.max-size=10MB
logging.file.max-history=7

  # ??????
logging.pattern.console=%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(%5p) %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n%wEx
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

  # =====================================================================
  # ??????????
  # =====================================================================

  # ??????
cors.allowed-origins=http://localhost:3000,http://127.0.0.1:3000,https://dev-interview.your-university.edu

  # ???????
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS

  # ???????
cors.allowed-headers=*

  # ????
cors.allow-credentials=true

  # ????????
cors.max-age=3600

  # =====================================================================
  # ??????
  # =====================================================================

  # ?????
management.endpoints.web.exposure.include=health,info,metrics,prometheus

  # ??????
management.endpoint.health.show-details=always

  # Prometheus????
management.endpoint.prometheus.enabled=true

  # ????
management.metrics.export.prometheus.enabled=true
  # =====================================================================
  # ?????
  # =====================================================================

  # MySQL?????
spring.datasource.url=jdbc:mysql://localhost:3306/smart_interview_db?useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true&characterEncoding=utf8
spring.datasource.username=root
spring.datasource.password=mysql
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# JPA/Hibernate??
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.query.fail_on_pagination_over_collection_fetch=true
spring.jpa.properties.hibernate.query.in_clause_parameter_padding=true

# ????????
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.connection-test-query=SELECT 1


  # ????
app.interview.default-difficulty=2
app.interview.max-questions-per-session=10
app.interview.feedback-timeout=30000

  # ????
app.audio.sample-rate=16000
app.audio.channels=1
app.audio.max-silence-duration=5000

